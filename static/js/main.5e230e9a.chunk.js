(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{102:function(e,t,n){},104:function(e,t,n){},105:function(e,t,n){},106:function(e,t,n){},550:function(e,t,n){},551:function(e,t,n){},585:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=585},603:function(e,t,n){},610:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(24),i=n.n(s),r=n(9),u=n(10),c=n(16),d=n(12),h=n(11),l=(n(102),n(3)),p=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={video:!1,audio:!1},a}return Object(u.a)(n,[{key:"toggleAudioCss",value:function(){var e=this.state.audio;this.setState({audio:!e})}},{key:"toggleVideoCss",value:function(){var e=this.state.video;this.setState({video:!e})}},{key:"handleClick",value:function(){window.prompt("ROOM URL",window.location.href)}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)("div",{href:"#",className:"logo",children:"PEER CODER"}),Object(l.jsx)("button",{className:"copy-url",onClick:function(){return e.handleClick()},children:"ROOM URL"}),Object(l.jsxs)("div",{className:"header-right",children:[Object(l.jsx)("button",{className:this.state.video?"buttonOn":"buttonOff",onClick:function(){e.props.onVideoToggle(e.props.userId),e.toggleVideoCss()},children:Object(l.jsx)("i",{className:this.state.video?"fa fa-video-camera":"fa fa-video-slash"})}),Object(l.jsx)("button",{className:this.state.audio?"buttonOn":"buttonOff",onClick:function(){e.props.onAudioToggle(e.props.userId),e.toggleAudioCss()},children:Object(l.jsx)("i",{className:this.state.audio?"fa fa-microphone":"fa fa-microphone-slash"})})]})]})}}]),n}(a.Component),f=(n(104),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.video.srcObject=this.props.media}},{key:"shouldComponentUpdate",value:function(e){return this.props.media!==e.media}},{key:"componentDidUpdate",value:function(){this.video.srcObject=this.props.media}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,o=t.muted,s=t.children;return Object(l.jsx)("video",{height:a,width:n,muted:o,autoPlay:!0,ref:function(t){e.video=t},children:s})}}]),n}(o.a.Component));f.defaultProps={children:null,height:110,width:160,muted:!1,media:null};var m,j,b,v=f,O=(n(105),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(l.jsx)("div",{className:"scrollmenu",children:this.props.peersStream.map((function(t){return Object(l.jsx)(v,{media:t.stream,height:110,width:160,muted:e.props.userId===t.userId},t.userId)}))})}}]),n}(a.Component)),g=n(620),k=(n(106),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"config-bar",children:[Object(l.jsx)(g.a,{className:"dropdown",placeholder:"Theme",selection:!0,options:this.props.themes,onChange:function(t,n){return e.props.handleOnChange(t,n)},defaultValue:this.props.themes[8].value}),Object(l.jsx)(g.a,{className:"dropdown",placeholder:"Language",selection:!0,options:this.props.languages,onChange:function(t,n){return e.props.handleOnChange(t,n)},defaultValue:this.props.defaultMode}),Object(l.jsx)(g.a,{className:"dropdown",placeholder:"Font Size",selection:!0,options:this.props.fontSizes,onChange:function(t,n){return e.props.handleOnChange(t,n)},defaultValue:this.props.fontSizes[4].value}),Object(l.jsx)("button",{className:"run",onClick:function(){return e.props.handleRunClick()},children:"Run"})]})}}]),n}(a.Component)),C=n(38),S=n.n(C),x=n(85),w=(n(118),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),n(549),n(550),Object.keys({c:"c_cpp",cpp:"c_cpp",python:"python",python3:"python",java:"java"})),y=["8","10","12","14","16","18","20","22","24","26","28","30","32"],I=["monokai","github","solarized_dark","dracula","eclipse","tomorrow_night","tomorrow_night_blue","xcode","ambiance","solarized_light"].sort(),N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).state={mode:"java",theme:"tomorrow_night_blue",fontSize:16};var o=0;m=w.map((function(e){return{key:""+ ++o,text:e,value:e}}));var s=0;j=y.map((function(e){return{key:""+ ++s,text:e,value:e}}));var i=0;return b=I.map((function(e){return{key:""+ ++i,text:e,value:e}})),a.handleOnChange=a.handleOnChange.bind(Object(c.a)(a)),a}return Object(u.a)(n,[{key:"handleOnChange",value:function(e,t){console.log(t),"Theme"===t.placeholder?this.setState({theme:t.value}):"Font Size"===t.placeholder?this.setState({fontSize:parseInt(t.value)}):"Language"===t.placeholder&&this.setState({mode:t.value})}},{key:"render",value:function(){var e=this;return Object(l.jsxs)(o.a.Fragment,{children:[Object(l.jsx)(k,{defaultMode:this.state.mode,handleOnChange:this.handleOnChange,languages:m,fontSizes:j,themes:b,handleRunClick:function(){return e.props.handleRunClick(e.state.mode)}}),Object(l.jsxs)(x.a,{split:"vertical",minSize:100,maxSize:window.innerWidth-50,defaultSize:.5*window.innerWidth,style:{height:"65vh"},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"head",children:Object(l.jsx)("div",{className:"text",children:"CODE HERE"})}),Object(l.jsx)(S.a,{mode:this.state.mode,theme:this.state.theme,fontSize:this.state.fontSize,value:this.props.code,onChange:function(t){return e.props.onChangeCode(t)},width:"100vw",height:"61.4vh",showGutter:!0,useWorker:!1,editorProps:{$blockScrolling:!1},setOptions:{enableLiveAutocompletion:!0,enableSnippets:!0}})]}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"head",children:Object(l.jsx)("div",{className:"text",children:"INPUT"})}),Object(l.jsx)(S.a,{mode:this.state.mode,theme:this.state.theme,fontSize:this.state.fontSize,value:this.props.input,onChange:function(t){return e.props.onChangeInput(t)},width:"100vw",height:"28vh",showGutter:!0,useWorker:!1,editorProps:{$blockScrolling:!1},setOptions:{enableLiveAutocompletion:!0,enableSnippets:!0}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"head",children:Object(l.jsx)("div",{className:"text",children:"OUTPUT"})}),Object(l.jsx)(S.a,{mode:this.state.mode,theme:this.state.theme,fontSize:this.state.fontSize,value:this.props.output,onChange:function(t){return e.props.onChangeOutput(t)},width:"100vw",height:"32vh",readOnly:!0,showGutter:!0,useWorker:!1,editorProps:{$blockScrolling:!1},setOptions:{enableLiveAutocompletion:!0,enableSnippets:!0}})]})]})]})]})}}]),n}(a.Component),T=(n(551),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{className:"footer",children:[Object(l.jsx)("a",{href:"https://github.com/shreyshreyansh/Peer-Coder",target:"_blank",className:"left-footer",children:"\u2b50 Star Project"}),Object(l.jsx)("a",{href:"https://github.com",target:"_blank",className:"right-footer",children:"\xa9 GitHub community"})]})}}]),n}(a.Component)),z=n(81),_=n.n(z),V=n(82),R=n.n(V),U=n(47),A=n.n(U),F=(n(603),new R.a),E=_()("https://peaceful-depths-33963.herokuapp.com/"),P={},D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={userId:"",stream:{},peers:[],code:"",input:"",output:""},a.handleVideoToggle=a.handleVideoToggle.bind(Object(c.a)(a)),a.handleAudioToggle=a.handleAudioToggle.bind(Object(c.a)(a)),a.handleChangeCode=a.handleChangeCode.bind(Object(c.a)(a)),a.handleChangeInput=a.handleChangeInput.bind(Object(c.a)(a)),a.handleChangeOutput=a.handleChangeOutput.bind(Object(c.a)(a)),a.handleRunClick=a.handleRunClick.bind(Object(c.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;F.on("open",(function(t){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(n){e.addUserIdAndStream(t,n),e.addVideoStream(t,n,!1),E.on("user-connected",(function(t){e.connectToNewUser(t,n),e.sendDatatoNewUser()})),F.on("call",(function(t){t.answer(n),t.on("stream",(function(n){e.addVideoStream(t.peer,n,!1)})),t.on("close",(function(){var n=e.state.peers.filter((function(e){return e.userId!==t.peer}));e.setState({peers:n})})),P[t.peer]=t})),E.emit("join-room",e.props.roomId,t),E.on("receive code",(function(t){e.updateCodeFromSockets(t)})),E.on("receive input",(function(t){e.updateInputFromSockets(t)})),E.on("receive output",(function(t){e.updateOutputFromSockets(t)})),E.on("receive-data-for-new-user",(function(t){e.updateStateFromSockets(t)}))}))})),E.on("user-disconnected",(function(e){P[e]&&P[e].close()}))}},{key:"sendDatatoNewUser",value:function(){E.emit("data-for-new-user",{newCode:this.state.code,newInput:this.state.input,newOutput:this.state.output})}},{key:"updateStateFromSockets",value:function(e){this.setState({code:e.newCode}),this.setState({input:e.newInput}),this.setState({output:e.newOutput})}},{key:"updateCodeFromSockets",value:function(e){this.setState({code:e.newCode})}},{key:"updateInputFromSockets",value:function(e){this.setState({input:e.newInput})}},{key:"updateOutputFromSockets",value:function(e){this.setState({output:e.newOutput})}},{key:"connectToNewUser",value:function(e,t){var n=this,a=F.call(e,t);a.on("stream",(function(t){n.addVideoStream(e,t,!1)})),a.on("close",(function(){var t=n.state.peers.filter((function(t){return t.userId!==e}));n.setState({peers:t})})),P[e]=a}},{key:"addVideoStream",value:function(e,t,n){e===this.state.userId&&(t.getVideoTracks()[0].enabled=!1,t.getAudioTracks()[0].enabled=!1);var a=this.state.peers;a.forEach((function(a){a.userId===e&&(a.stream=t,n=!0)})),n||a.push({userId:e,stream:t}),this.setState({peers:a})}},{key:"addUserIdAndStream",value:function(e,t){this.setState({userId:e,stream:t})}},{key:"handleVideoToggle",value:function(e){this.state.peers.forEach((function(t){if(t.userId===e){var n=t.stream.getVideoTracks()[0].enabled;t.stream.getVideoTracks()[0].enabled=!n}}))}},{key:"handleAudioToggle",value:function(e){this.state.peers.forEach((function(t){if(t.userId===e){var n=t.stream.getAudioTracks()[0].enabled;t.stream.getAudioTracks()[0].enabled=!n}}))}},{key:"handleChangeCode",value:function(e){this.setState({code:e}),E.emit("code change",{newCode:e})}},{key:"handleChangeInput",value:function(e){this.setState({input:e}),E.emit("input change",{newInput:e})}},{key:"handleChangeOutput",value:function(e){this.setState({output:e}),E.emit("output change",{newOutput:e})}},{key:"handleRunClick",value:function(e){var t=this,n={source_code:this.state.code,language:e,input:this.state.input,api_key:"guest"};A.a.post("https://api.paiza.io/runners/create",n).then((function(e){var n=new URLSearchParams({id:e.data.id,api_key:"guest"});!function e(t,a){A.a.get("https://api.paiza.io/runners/get_details?".concat(n.toString())).then((function(n){"completed"===n.data.status?a(n):t>0?e(--t,a):a([],"out of retries")})).catch((function(n){t>0?e(--t,a):a([],n)}))}(10,(function(e,n){if(n)console.error(n);else{var a="";e.data.stdout&&(a+=e.data.stdout),e.data.stderr&&(a+=e.data.stderr),e.data.build_stderr&&(a+=e.data.build_stderr),t.setState({output:a})}}))}))}},{key:"render",value:function(){return Object(l.jsxs)(o.a.Fragment,{children:[Object(l.jsx)(p,{userId:this.state.userId,stream:this.state.stream,onVideoToggle:this.handleVideoToggle,onAudioToggle:this.handleAudioToggle}),Object(l.jsx)(O,{peersStream:this.state.peers,userId:this.state.userId}),Object(l.jsx)(N,{code:this.state.code,input:this.state.input,output:this.state.output,onChangeCode:this.handleChangeCode,onChangeInput:this.handleChangeInput,onChangeOutput:this.handleChangeOutput,handleRunClick:this.handleRunClick}),Object(l.jsx)(T,{})]})}}]),n}(a.Component),L=n(83),M=n(5),W=n(609).v4;function G(){var e=Object(M.f)().roomId;return Object(l.jsx)(D,{roomId:e})}i.a.render(Object(l.jsxs)(L.a,{children:[Object(l.jsx)(M.b,{exact:!0,path:"/",children:Object(l.jsx)(M.a,{to:"/"+W()})}),Object(l.jsx)(M.b,{path:"/:roomId",children:Object(l.jsx)(G,{})})]}),document.getElementById("root"))}},[[610,1,2]]]);
//# sourceMappingURL=main.5e230e9a.chunk.js.map