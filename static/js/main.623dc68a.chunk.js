(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{540:function(e,t,n){},541:function(e,t,n){},575:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=575},576:function(e,t,n){},583:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(23),i=n.n(s),r=n(9),u=n(10),c=n(19),d=n(12),h=n(11),l=(n(92),n(3)),p=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={video:!1,audio:!1},a}return Object(u.a)(n,[{key:"toggleAudioCss",value:function(){var e=this.state.audio;this.setState({audio:!e})}},{key:"toggleVideoCss",value:function(){var e=this.state.video;this.setState({video:!e})}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)("span",{href:"#",className:"logo",children:"PEER CODER"}),Object(l.jsxs)("div",{className:"header-right",children:[Object(l.jsx)("button",{className:this.state.video?"buttonOn":"buttonOff",onClick:function(){e.props.onVideoToggle(e.props.userId),e.toggleVideoCss()},children:Object(l.jsx)("i",{className:this.state.video?"fa fa-video-camera":"fa fa-video-slash"})}),Object(l.jsx)("button",{className:this.state.audio?"buttonOn":"buttonOff",onClick:function(){e.props.onAudioToggle(e.props.userId),e.toggleAudioCss()},children:Object(l.jsx)("i",{className:this.state.audio?"fa fa-microphone":"fa fa-microphone-slash"})})]})]})}}]),n}(a.Component),f=(n(94),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.video.srcObject=this.props.media}},{key:"shouldComponentUpdate",value:function(e){return this.props.media!==e.media}},{key:"componentDidUpdate",value:function(){this.video.srcObject=this.props.media}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,o=t.muted,s=t.children;return Object(l.jsx)("video",{height:a,width:n,muted:o,autoPlay:!0,ref:function(t){e.video=t},children:s})}}]),n}(o.a.Component));f.defaultProps={children:null,height:110,width:160,muted:!1,media:null};var j,m,b,v=f,O=(n(95),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(l.jsx)("div",{className:"scrollmenu",children:this.props.peersStream.map((function(t){return Object(l.jsx)(v,{media:t.stream,height:110,width:160,muted:e.props.userId===t.userId},t.userId)}))})}}]),n}(a.Component)),g=n(593),C=(n(96),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{className:"config-bar",children:[Object(l.jsx)(g.a,{className:"dropdown",placeholder:"Theme",selection:!0,options:this.props.themes,onChange:function(t,n){return e.props.handleOnChange(t,n)},defaultValue:this.props.themes[8].value}),Object(l.jsx)(g.a,{className:"dropdown",placeholder:"Language",selection:!0,options:this.props.languages,onChange:function(t,n){return e.props.handleOnChange(t,n)},defaultValue:this.props.defaultMode}),Object(l.jsx)(g.a,{className:"dropdown",placeholder:"Font Size",selection:!0,options:this.props.fontSizes,onChange:function(t,n){return e.props.handleOnChange(t,n)},defaultValue:this.props.fontSizes[4].value})]})}}]),n}(a.Component)),k=n(36),S=n.n(k),x=n(75),w=(n(108),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),Object.keys({c:"c_cpp",cpp:"c_cpp",python:"python",python3:"python",java:"java",javascript:"javascript",kotlin:"kotlin",rust:"rust"})),y=["8","10","12","14","16","18","20","22","24","26","28","30","32"],I=["monokai","github","solarized_dark","dracula","eclipse","tomorrow_night","tomorrow_night_blue","xcode","ambiance","solarized_light"].sort(),N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).state={mode:"java",theme:"tomorrow_night_blue",fontSize:16};var o=0;j=w.map((function(e){return{key:""+ ++o,text:e,value:e}}));var s=0;m=y.map((function(e){return{key:""+ ++s,text:e,value:e}}));var i=0;return b=I.map((function(e){return{key:""+ ++i,text:e,value:e}})),a.handleOnChange=a.handleOnChange.bind(Object(c.a)(a)),a}return Object(u.a)(n,[{key:"handleOnChange",value:function(e,t){console.log(t),"Theme"===t.placeholder?this.setState({theme:t.value}):"Font Size"===t.placeholder?this.setState({fontSize:parseInt(t.value)}):"Language"===t.placeholder&&this.setState({mode:t.value})}},{key:"render",value:function(){var e=this;return Object(l.jsxs)(o.a.Fragment,{children:[Object(l.jsx)(C,{defaultMode:this.state.mode,handleOnChange:this.handleOnChange,languages:j,fontSizes:m,themes:b}),Object(l.jsxs)(x.a,{split:"vertical",minSize:100,maxSize:window.innerWidth-50,defaultSize:.7*window.innerWidth,style:{height:"65vh"},children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"head",children:Object(l.jsx)("div",{className:"text",children:"CODE HERE"})}),Object(l.jsx)(S.a,{mode:this.state.mode,theme:this.state.theme,fontSize:this.state.fontSize,value:this.props.code,onChange:function(t){return e.props.onChangeCode(t)},width:"100vw",height:"70vh",showGutter:!0,editorProps:{$blockScrolling:!0},setOptions:{enableLiveAutocompletion:!0,enableSnippets:!0}})]}),Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"head",children:Object(l.jsx)("div",{className:"text",children:"INPUT"})}),Object(l.jsx)(S.a,{mode:this.state.mode,theme:this.state.theme,fontSize:this.state.fontSize,value:this.props.input,onChange:function(t){return e.props.onChangeInput(t)},width:"100vw",height:"30vh",showGutter:!0,editorProps:{$blockScrolling:!0},setOptions:{enableLiveAutocompletion:!0,enableSnippets:!0}})]}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"head",children:Object(l.jsx)("div",{className:"text",children:"OUTPUT"})}),Object(l.jsx)(S.a,{mode:this.state.mode,theme:this.state.theme,fontSize:this.state.fontSize,value:this.props.output,onChange:function(t){return e.props.onChangeOutput(t)},width:"100vw",height:"40vh",readOnly:!0,showGutter:!0,editorProps:{$blockScrolling:!0},setOptions:{enableLiveAutocompletion:!0,enableSnippets:!0}})]})]})]})]})}}]),n}(a.Component),T=(n(541),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(l.jsxs)("div",{className:"footer",children:[Object(l.jsx)("a",{href:"https://github.com/shreyshreyansh/Peer-Coder",target:"_blank",className:"left-footer",children:"\u2b50 Star Project"}),Object(l.jsx)("a",{href:"https://github.com",target:"_blank",className:"right-footer",children:"\xa9 GitHub community"})]})}}]),n}(a.Component)),z=n(71),V=n.n(z),A=n(72),U=n.n(A),F=(n(576),new U.a),_=V()("https://peaceful-depths-33963.herokuapp.com/"),E={},D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={userId:"",stream:{},peers:[],code:"",input:"",output:""},a.handleVideoToggle=a.handleVideoToggle.bind(Object(c.a)(a)),a.handleAudioToggle=a.handleAudioToggle.bind(Object(c.a)(a)),a.handleChangeCode=a.handleChangeCode.bind(Object(c.a)(a)),a.handleChangeInput=a.handleChangeInput.bind(Object(c.a)(a)),a.handleChangeOutput=a.handleChangeOutput.bind(Object(c.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;F.on("open",(function(t){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(n){e.addUserIdAndStream(t,n),e.addVideoStream(t,n,!1),_.on("user-connected",(function(t){e.connectToNewUser(t,n),e.sendDatatoNewUser()})),F.on("call",(function(t){t.answer(n),t.on("stream",(function(n){e.addVideoStream(t.peer,n,!1)})),t.on("close",(function(){var n=e.state.peers.filter((function(e){return e.userId!==t.peer}));e.setState({peers:n})})),E[t.peer]=t})),_.emit("join-room",e.props.roomId,t),_.on("receive code",(function(t){e.updateCodeFromSockets(t)})),_.on("receive input",(function(t){e.updateInputFromSockets(t)})),_.on("receive output",(function(t){e.updateOutputFromSockets(t)})),_.on("receive-data-for-new-user",(function(t){e.updateStateFromSockets(t)}))}))})),_.on("user-disconnected",(function(e){E[e]&&E[e].close()}))}},{key:"sendDatatoNewUser",value:function(){_.emit("data-for-new-user",{newCode:this.state.code,newInput:this.state.input,newOutput:this.state.output})}},{key:"updateStateFromSockets",value:function(e){this.setState({code:e.newCode}),this.setState({input:e.newInput}),this.setState({output:e.newOutput})}},{key:"updateCodeFromSockets",value:function(e){this.setState({code:e.newCode})}},{key:"updateInputFromSockets",value:function(e){this.setState({input:e.newInput})}},{key:"updateOutputFromSockets",value:function(e){this.setState({output:e.newOutput})}},{key:"connectToNewUser",value:function(e,t){var n=this,a=F.call(e,t);a.on("stream",(function(t){n.addVideoStream(e,t,!1)})),a.on("close",(function(){var t=n.state.peers.filter((function(t){return t.userId!==e}));n.setState({peers:t})})),E[e]=a}},{key:"addVideoStream",value:function(e,t,n){e===this.state.userId&&(t.getVideoTracks()[0].enabled=!1,t.getAudioTracks()[0].enabled=!1);var a=this.state.peers;a.forEach((function(a){a.userId===e&&(a.stream=t,n=!0)})),n||a.push({userId:e,stream:t}),this.setState({peers:a})}},{key:"addUserIdAndStream",value:function(e,t){this.setState({userId:e,stream:t})}},{key:"handleVideoToggle",value:function(e){this.state.peers.forEach((function(t){if(t.userId===e){var n=t.stream.getVideoTracks()[0].enabled;t.stream.getVideoTracks()[0].enabled=!n}}))}},{key:"handleAudioToggle",value:function(e){this.state.peers.forEach((function(t){if(t.userId===e){var n=t.stream.getAudioTracks()[0].enabled;t.stream.getAudioTracks()[0].enabled=!n}}))}},{key:"handleChangeCode",value:function(e){this.setState({code:e}),_.emit("code change",{newCode:e})}},{key:"handleChangeInput",value:function(e){this.setState({input:e}),_.emit("input change",{newInput:e})}},{key:"handleChangeOutput",value:function(e){this.setState({output:e}),_.emit("output change",{newOutput:e})}},{key:"render",value:function(){return Object(l.jsxs)(o.a.Fragment,{children:[Object(l.jsx)(p,{userId:this.state.userId,stream:this.state.stream,onVideoToggle:this.handleVideoToggle,onAudioToggle:this.handleAudioToggle}),Object(l.jsx)(O,{peersStream:this.state.peers,userId:this.state.userId}),Object(l.jsx)(N,{code:this.state.code,input:this.state.input,output:this.state.output,onChangeCode:this.handleChangeCode,onChangeInput:this.handleChangeInput,onChangeOutput:this.handleChangeOutput}),Object(l.jsx)(T,{})]})}}]),n}(a.Component),P=n(73),L=n(5),M=n(582).v4;function G(){var e=Object(L.f)().roomId;return Object(l.jsx)(D,{roomId:e})}i.a.render(Object(l.jsxs)(P.a,{children:[Object(l.jsx)(L.b,{exact:!0,path:"/",children:Object(l.jsx)(L.a,{to:"/"+M()})}),Object(l.jsx)(L.b,{path:"/:roomId",children:Object(l.jsx)(G,{})})]}),document.getElementById("root"))},92:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[583,1,2]]]);
//# sourceMappingURL=main.623dc68a.chunk.js.map